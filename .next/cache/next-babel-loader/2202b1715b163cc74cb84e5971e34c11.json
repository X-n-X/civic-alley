{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/benjamingordon/Documents/X&X/townie/components/GoogleMap/index.jsx\",\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext, useState, useEffect } from 'react';\nimport GoogleMapReact from 'google-map-react';\nimport useSwr from 'swr';\nimport { MapMarker } from 'components/MapMarker';\nimport { MapMarkersContext } from 'components/MapMarkersContext';\nimport config from './mapConfig';\n\nfunction getMapOptions() {\n  return config;\n} // function getCenter(x) {\n//   if(x === undefined){\n//     var address = \"554 76th street bay ridge\";\n//     const { coordinates, error } = useSwr(`https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=${address}`, fetcher);\n//     if (error) {\n//       console.error('Error loading the Google Maps lng lat ', error);\n//     }\n//     return {lat: coordinates.results[0].geometry.location.lat, lng: coordinates.results[0].geometry.location.lng};    \n//   }else\n//     return {lat: 40.635,lng: -73.94};\n// }\n// function changeCenter() {  \n//   var coordinates = {lat: 40.742,lng: -73.769};\n//   return coordinates;  \n// }\n// var address = \"\";\n// function setCoordinates(address){    \n// if(address !== \"\"){             \n//     //fetch(`https://maps.googleapis.com/maps/api/geocode/json?key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_BOOTSTRAP_URL}&address=${this.state.address}`,{\n//     fetch(`https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=${this.state.address}`,{\n//         method: \"GET\",\n//         dataType: \"JSON\",\n//         // headers: {\n//         //   \"Content-Type\": \"application/json; charset=utf-8\",\n//         // }\n//     })\n//     .then(response => response.json())\n//     .then(data => {           \n//       this.setState({ coordinates: {lat: data.results[0].geometry.location.lat, lng: data.results[0].geometry.location.lng}});          \n//     });\n// }\n// }\n\n\nfunction changeCenter(address) {\n  console.log(\"address\", address);\n\n  if (address !== \"\") {\n    //fetch(`https://maps.googleapis.com/maps/api/geocode/json?key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_BOOTSTRAP_URL}&address=${this.state.address}`,{\n    fetch(\"https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=\".concat(address), {\n      method: \"GET\",\n      dataType: \"JSON\" // headers: {\n      //   \"Content-Type\": \"application/json; charset=utf-8\",\n      // }\n\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      return {\n        lat: data.results[0].geometry.location.lat,\n        lng: data.results[0].geometry.location.lng\n      };\n    });\n  }\n}\n\nexport function GoogleMap() {\n  _s2();\n\n  var _s = $RefreshSig$(),\n      _this = this;\n\n  var fetcher = function fetcher() {\n    return fetch.apply(void 0, arguments).then(function (res) {\n      return res.json();\n    });\n  };\n\n  var _useContext = useContext(MapMarkersContext),\n      markers = _useContext.markers;\n\n  var _React$useState = React.useState(\"554 76th street bay ridge\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      address = _React$useState2[0],\n      setAddress = _React$useState2[1];\n\n  var coordinates_url = \"https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=\".concat(address); //var coordinates_url = `https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=554%2076th%20street%20bay%20ridge`;\n\n  var _useSwr = useSwr(coordinates_url, fetcher),\n      coordinates = _useSwr.coordinates,\n      error = _useSwr.error;\n\n  if (error) {\n    console.error('Error loading the Google Maps lng lat ', error);\n  } else if (!coordinates) {\n    console.log(\"still loading\");\n  } else {\n    console.log(\"coordinates\", coordinates);\n  }\n\n  useEffect(_s(function () {\n    _s();\n\n    var _useSwr2 = useSwr(coordinates_url, fetcher),\n        coordinates = _useSwr2.coordinates,\n        error = _useSwr2.error;\n\n    if (error) {\n      console.error('Error loading the Google Maps lng lat ', error);\n    }\n\n    var formattedData = (data || []).map(function (site) {\n      return {\n        coordinates: {\n          lat: site.results[0].geometry.location.lat,\n          lng: site.results[0].geometry.location.lng\n        }\n      };\n    });\n  }, \"EgL7A1pz2CPZ9ekhjZObCT1idkU=\", false, function () {\n    return [useSwr];\n  }), [formattedData, setCenter]);\n\n  var _useState = useState(\"\"),\n      newAddress = _useState[0],\n      setNewAddress = _useState[1];\n\n  var _useState2 = useState({\n    lat: 40.635,\n    lng: -73.94\n  }),\n      center = _useState2[0],\n      setCenter = _useState2[1];\n\n  return __jsx(\"div\", {\n    className: \"google-map-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, __jsx(\"input\", {\n    value: newAddress,\n    onChange: setNewAddress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 8\n    }\n  }), __jsx(\"button\", {\n    onClick: function onClick() {\n      return setCenter({\n        lat: 40.742,\n        lng: -73.769\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 8\n    }\n  }, \"Change Center\"), __jsx(GoogleMapReact, {\n    bootstrapURLKeys: {\n      key: \"AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo\"\n    } //bootstrapURLKeys={{ key: process.env.NEXT_PUBLIC_GOOGLE_MAPS_BOOTSTRAP_URL }}\n    ,\n    center: center,\n    defaultZoom: 13,\n    options: getMapOptions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, markers.map(function (item) {\n    return __jsx(MapMarker, {\n      key: item.key //text={item.name}            \n      ,\n      lat: item.coordinates.lat,\n      lng: item.coordinates.lng,\n      output_key: item.output_key,\n      name: item.name // coordinates = {item.coordinates}      \n      ,\n      site_info: item.site_info,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    });\n  })));\n}\n\n_s2(GoogleMap, \"AgfrX7nzIcx4mSC8IBu0T1nKzPY=\", false, function () {\n  return [useSwr];\n});\n\n_c = GoogleMap;\n\nvar _c;\n\n$RefreshReg$(_c, \"GoogleMap\");","map":{"version":3,"sources":["/Users/benjamingordon/Documents/X&X/townie/components/GoogleMap/index.jsx"],"names":["React","useContext","useState","useEffect","GoogleMapReact","useSwr","MapMarker","MapMarkersContext","config","getMapOptions","changeCenter","address","console","log","fetch","method","dataType","then","response","json","data","lat","results","geometry","location","lng","GoogleMap","fetcher","res","markers","setAddress","coordinates_url","coordinates","error","formattedData","map","site","setCenter","newAddress","setNewAddress","center","key","item","output_key","name","site_info"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport useSwr from 'swr';\r\n\r\nimport { MapMarker } from 'components/MapMarker';\r\nimport { MapMarkersContext } from 'components/MapMarkersContext';\r\n\r\nimport config from './mapConfig';\r\n\r\nfunction getMapOptions() {\r\n  return config;\r\n}\r\n\r\n\r\n// function getCenter(x) {\r\n//   if(x === undefined){\r\n//     var address = \"554 76th street bay ridge\";\r\n//     const { coordinates, error } = useSwr(`https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=${address}`, fetcher);\r\n//     if (error) {\r\n//       console.error('Error loading the Google Maps lng lat ', error);\r\n//     }\r\n//     return {lat: coordinates.results[0].geometry.location.lat, lng: coordinates.results[0].geometry.location.lng};    \r\n//   }else\r\n//     return {lat: 40.635,lng: -73.94};\r\n// }\r\n\r\n// function changeCenter() {  \r\n//   var coordinates = {lat: 40.742,lng: -73.769};\r\n//   return coordinates;  \r\n// }\r\n\r\n// var address = \"\";\r\n\r\n// function setCoordinates(address){    \r\n  // if(address !== \"\"){             \r\n  //     //fetch(`https://maps.googleapis.com/maps/api/geocode/json?key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_BOOTSTRAP_URL}&address=${this.state.address}`,{\r\n  //     fetch(`https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=${this.state.address}`,{\r\n  //         method: \"GET\",\r\n  //         dataType: \"JSON\",\r\n  //         // headers: {\r\n  //         //   \"Content-Type\": \"application/json; charset=utf-8\",\r\n  //         // }\r\n  //     })\r\n  //     .then(response => response.json())\r\n  //     .then(data => {           \r\n  //       this.setState({ coordinates: {lat: data.results[0].geometry.location.lat, lng: data.results[0].geometry.location.lng}});          \r\n  //     });\r\n  // }\r\n// }\r\n\r\nfunction changeCenter(address){\r\n  console.log(\"address\",address)\r\n  if(address !== \"\"){             \r\n      //fetch(`https://maps.googleapis.com/maps/api/geocode/json?key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_BOOTSTRAP_URL}&address=${this.state.address}`,{\r\n      fetch(`https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=${address}`,{\r\n          method: \"GET\",\r\n          dataType: \"JSON\",\r\n          // headers: {\r\n          //   \"Content-Type\": \"application/json; charset=utf-8\",\r\n          // }\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {           \r\n        return {lat: data.results[0].geometry.location.lat, lng: data.results[0].geometry.location.lng}; \r\n      });\r\n  }\r\n}\r\n\r\nexport function GoogleMap() {  \r\n  const fetcher = (...args) => fetch(...args).then(res => res.json());  \r\n\r\n  const { markers } = useContext(MapMarkersContext);\r\n  const [address, setAddress] = React.useState(\"554 76th street bay ridge\"); \r\n  var coordinates_url = `https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=${address}`;\r\n  //var coordinates_url = `https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=554%2076th%20street%20bay%20ridge`;\r\n  const { coordinates, error } = useSwr(coordinates_url, fetcher);\r\n  if (error) {\r\n    console.error('Error loading the Google Maps lng lat ', error);\r\n  }else if (!coordinates){\r\n    console.log(\"still loading\");\r\n  }\r\n  else{\r\n    console.log(\"coordinates\",coordinates);\r\n  }  \r\n\r\n  useEffect(() => {        \r\n    const { coordinates, error } = useSwr(coordinates_url, fetcher);\r\n    if (error) {\r\n      console.error('Error loading the Google Maps lng lat ', error);\r\n    }\r\n    const formattedData = (data || []).map((site) => ({\r\n      coordinates: {lat: site.results[0].geometry.location.lat, \r\n        lng: site.results[0].geometry.location.lng},\r\n    }));\r\n\r\n  }, [formattedData, setCenter]);\r\n\r\n  const [newAddress, setNewAddress] = useState(\"\");\r\n  const [center, setCenter] = useState({lat: 40.635,lng: -73.94});\r\n\r\n  return (\r\n    <div className=\"google-map-container\">      \r\n      {/* {<button onClick={() => setCenter({lat: 40.742,lng: -73.769})} >Change Center</button>} */}\r\n      {<input value={newAddress} onChange={setNewAddress}></input>}\r\n      {<button onClick={() => setCenter({lat: 40.742,lng: -73.769})}>Change Center</button>}      \r\n      <GoogleMapReact\r\n        bootstrapURLKeys={{ key: \"AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo\" }}\r\n        //bootstrapURLKeys={{ key: process.env.NEXT_PUBLIC_GOOGLE_MAPS_BOOTSTRAP_URL }}\r\n        center={center}\r\n        defaultZoom={13}\r\n        options={getMapOptions}\r\n      >\r\n       {markers.map((item) => (\r\n          <MapMarker\r\n            key={item.key}\r\n            //text={item.name}            \r\n            lat={ item.coordinates.lat}\r\n            lng={ item.coordinates.lng}\r\n            output_key = {item.output_key}            \r\n            name = {item.name}\r\n            // coordinates = {item.coordinates}      \r\n            site_info= {item.site_info}             \r\n          />\r\n        ))}\r\n      </GoogleMapReact>      \r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}