{"ast":null,"code":"var _jsxFileName = \"/Users/benjamingordon/Documents/X&X/townie/pages/covid-testing-sites/index.jsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport useSwr from 'swr';\nimport { MapMarkersContext } from 'components/MapMarkersContext';\nimport { getLayout } from 'components/MapLayout';\n\nconst fetcher = (...args) => fetch(...args).then(res => res.json());\n\nfunction CovidTestingSitesPage() {\n  const {\n    setState: setMapMarkers\n  } = React.useContext(MapMarkersContext);\n  const [center, setCenter] = useState({\n    lat: 40.635,\n    lng: -73.94\n  });\n  const {\n    data,\n    error\n  } = useSwr('/api/testing-sites', fetcher);\n\n  if (error) {\n    console.error('Error loading data from API for /api/testing-sites: ', error);\n  }\n\n  useEffect(() => {\n    const formattedData = (data || []).map(site => ({\n      key: `${site.site_name}+${site.coordinates.lat}+${site.coordinates.lng}`,\n      name: site.site_name,\n      site_info: {\n        name: site.site_name,\n        provider_url: site.provider_url,\n        additional_info: site.additional_info,\n        address: site.address,\n        phone: site.phone,\n        monday: site.monday,\n        tuesday: site.tuesday,\n        wednesday: site.wednesday,\n        thursday: site.thursday,\n        friday: site.friday,\n        saturday: site.saturday,\n        sunday: site.sunday,\n        screening_required: site.screening_required,\n        appointment_required: site.appointment_required,\n        antibody_testing: site.antibody_testing\n      },\n      coordinates: {\n        lat: site.coordinates.lat,\n        lng: site.coordinates.lng\n      }\n    })); //console.log(\"formattedData\",formattedData);\n\n    setMapMarkers(formattedData);\n    return () => {\n      setMapMarkers([]);\n    };\n  }, [data, setMapMarkers]);\n  return __jsx(\"div\", {\n    className: \"sidebar-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, error && 'Error loading content', !data && !error && 'Loading...', !error && data && 'Data goes here in addition to the map');\n}\n\nCovidTestingSitesPage.getLayout = getLayout;\nexport default CovidTestingSitesPage;","map":{"version":3,"sources":["/Users/benjamingordon/Documents/X&X/townie/pages/covid-testing-sites/index.jsx"],"names":["React","useEffect","useSwr","MapMarkersContext","getLayout","fetcher","args","fetch","then","res","json","CovidTestingSitesPage","setState","setMapMarkers","useContext","center","setCenter","useState","lat","lng","data","error","console","formattedData","map","site","key","site_name","coordinates","name","site_info","provider_url","additional_info","address","phone","monday","tuesday","wednesday","thursday","friday","saturday","sunday","screening_required","appointment_required","antibody_testing"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,KAAnB;AAEA,SAASC,iBAAT,QAAkC,8BAAlC;AACA,SAASC,SAAT,QAA0B,sBAA1B;;AAEA,MAAMC,OAAO,GAAG,CAAC,GAAGC,IAAJ,KAAaC,KAAK,CAAC,GAAGD,IAAJ,CAAL,CAAeE,IAAf,CAAoBC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAA3B,CAA7B;;AAEA,SAASC,qBAAT,GAAiC;AAC/B,QAAM;AAAEC,IAAAA,QAAQ,EAAEC;AAAZ,MAA8Bb,KAAK,CAACc,UAAN,CAAiBX,iBAAjB,CAApC;AACA,QAAM,CAACY,MAAD,EAASC,SAAT,IAAsBC,QAAQ,CAAC;AAACC,IAAAA,GAAG,EAAE,MAAN;AAAaC,IAAAA,GAAG,EAAE,CAAC;AAAnB,GAAD,CAApC;AACA,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAkBnB,MAAM,CAAC,oBAAD,EAAuBG,OAAvB,CAA9B;;AACA,MAAIgB,KAAJ,EAAW;AACTC,IAAAA,OAAO,CAACD,KAAR,CAAc,sDAAd,EAAsEA,KAAtE;AACD;;AAEDpB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMsB,aAAa,GAAG,CAACH,IAAI,IAAI,EAAT,EAAaI,GAAb,CAAkBC,IAAD,KAAW;AAChDC,MAAAA,GAAG,EAAG,GAAED,IAAI,CAACE,SAAU,IAAGF,IAAI,CAACG,WAAL,CAAiBV,GAAI,IAAGO,IAAI,CAACG,WAAL,CAAiBT,GAAI,EADvB;AAEhDU,MAAAA,IAAI,EAAEJ,IAAI,CAACE,SAFqC;AAGhDG,MAAAA,SAAS,EAAE;AACTD,QAAAA,IAAI,EAAEJ,IAAI,CAACE,SADF;AAETI,QAAAA,YAAY,EAAEN,IAAI,CAACM,YAFV;AAGTC,QAAAA,eAAe,EAAEP,IAAI,CAACO,eAHb;AAITC,QAAAA,OAAO,EAAER,IAAI,CAACQ,OAJL;AAKTC,QAAAA,KAAK,EAAET,IAAI,CAACS,KALH;AAMTC,QAAAA,MAAM,EAAEV,IAAI,CAACU,MANJ;AAOTC,QAAAA,OAAO,EAAEX,IAAI,CAACW,OAPL;AAQTC,QAAAA,SAAS,EAAEZ,IAAI,CAACY,SARP;AASTC,QAAAA,QAAQ,EAAEb,IAAI,CAACa,QATN;AAUTC,QAAAA,MAAM,EAAEd,IAAI,CAACc,MAVJ;AAWTC,QAAAA,QAAQ,EAAEf,IAAI,CAACe,QAXN;AAYTC,QAAAA,MAAM,EAAEhB,IAAI,CAACgB,MAZJ;AAaTC,QAAAA,kBAAkB,EAAEjB,IAAI,CAACiB,kBAbhB;AAcTC,QAAAA,oBAAoB,EAAElB,IAAI,CAACkB,oBAdlB;AAeTC,QAAAA,gBAAgB,EAAEnB,IAAI,CAACmB;AAfd,OAHqC;AAoBhDhB,MAAAA,WAAW,EAAE;AACXV,QAAAA,GAAG,EAAEO,IAAI,CAACG,WAAL,CAAiBV,GADX;AAEXC,QAAAA,GAAG,EAAEM,IAAI,CAACG,WAAL,CAAiBT;AAFX;AApBmC,KAAX,CAAjB,CAAtB,CADc,CA0Bd;;AACAN,IAAAA,aAAa,CAACU,aAAD,CAAb;AAEA,WAAO,MAAM;AACXV,MAAAA,aAAa,CAAC,EAAD,CAAb;AACD,KAFD;AAGD,GAhCQ,EAgCN,CAACO,IAAD,EAAOP,aAAP,CAhCM,CAAT;AAmCA,SACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGQ,KAAK,IAAI,uBADZ,EAEG,CAACD,IAAD,IAAS,CAACC,KAAV,IAAmB,YAFtB,EAGG,CAACA,KAAD,IAAUD,IAAV,IAAkB,uCAHrB,CADF;AAOD;;AAEDT,qBAAqB,CAACP,SAAtB,GAAkCA,SAAlC;AAEA,eAAeO,qBAAf","sourcesContent":["import React, { useEffect } from 'react';\r\nimport useSwr from 'swr';\r\n\r\nimport { MapMarkersContext } from 'components/MapMarkersContext';\r\nimport { getLayout } from 'components/MapLayout';\r\n\r\nconst fetcher = (...args) => fetch(...args).then(res => res.json())\r\n\r\nfunction CovidTestingSitesPage() {\r\n  const { setState: setMapMarkers } = React.useContext(MapMarkersContext);\r\n  const [center, setCenter] = useState({lat: 40.635,lng: -73.94});\r\n  const { data, error } = useSwr('/api/testing-sites', fetcher);\r\n  if (error) {\r\n    console.error('Error loading data from API for /api/testing-sites: ', error);\r\n  }  \r\n\r\n  useEffect(() => {\r\n    const formattedData = (data || []).map((site) => ({\r\n      key: `${site.site_name}+${site.coordinates.lat}+${site.coordinates.lng}`,\r\n      name: site.site_name,   \r\n      site_info: {\r\n        name: site.site_name, \r\n        provider_url: site.provider_url,\r\n        additional_info: site.additional_info,\r\n        address: site.address,\r\n        phone: site.phone,\r\n        monday: site.monday,\r\n        tuesday: site.tuesday,\r\n        wednesday: site.wednesday,\r\n        thursday: site.thursday,\r\n        friday: site.friday,\r\n        saturday: site.saturday,\r\n        sunday: site.sunday,\r\n        screening_required: site.screening_required,\r\n        appointment_required: site.appointment_required,\r\n        antibody_testing: site.antibody_testing, \r\n      },                   \r\n      coordinates: {\r\n        lat: site.coordinates.lat,\r\n        lng: site.coordinates.lng,\r\n      },\r\n    }));\r\n    //console.log(\"formattedData\",formattedData);\r\n    setMapMarkers(formattedData);\r\n\r\n    return () => {\r\n      setMapMarkers([]);\r\n    }\r\n  }, [data, setMapMarkers]);\r\n\r\n\r\n  return (\r\n    <div className=\"sidebar-content\">\r\n      {error && 'Error loading content'}\r\n      {!data && !error && 'Loading...'}\r\n      {!error && data && 'Data goes here in addition to the map'}\r\n    </div>\r\n  );\r\n}\r\n\r\nCovidTestingSitesPage.getLayout = getLayout;\r\n\r\nexport default CovidTestingSitesPage;\r\n"]},"metadata":{},"sourceType":"module"}