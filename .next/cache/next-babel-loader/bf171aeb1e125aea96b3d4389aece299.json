{"ast":null,"code":"var _jsxFileName = \"/Users/benjamingordon/Documents/X&X/townie/components/GoogleMap/index.jsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext, useState, useEffect } from 'react';\nimport GoogleMapReact from 'google-map-react';\nimport useSwr from 'swr';\nimport { useRouter } from 'next/router';\nimport Link from 'next/link';\nimport { MapMarker } from 'components/MapMarker';\nimport { MapMarkersContext } from 'components/MapMarkersContext';\nimport { ClickedItemContext } from 'components/ClickedItemContext';\nimport config from './mapConfig';\n\nvar fetcher = function fetcher() {\n  return fetch.apply(void 0, arguments).then(function (res) {\n    return res.json();\n  });\n};\n\nfunction getMapOptions() {\n  return config;\n}\n\nexport function GoogleMap() {\n  _s();\n\n  var _this = this;\n\n  var _useContext = useContext(MapMarkersContext),\n      markers = _useContext.markers;\n\n  var _useState = useState(\"\"),\n      newAddress = _useState[0],\n      setNewAddress = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      markerClick = _useState2[0],\n      setMarkerClick = _useState2[1];\n\n  var _useState3 = useState([]),\n      currentPointClicked = _useState3[0],\n      addCurrentPointClicked = _useState3[1];\n\n  var _useState4 = useState({\n    lat: 40.635,\n    lng: -73.94\n  }),\n      center = _useState4[0],\n      setCenter = _useState4[1];\n\n  var _useState5 = useState(13),\n      zoom = _useState5[0],\n      setZoom = _useState5[1];\n\n  var _React$useContext = React.useContext(ClickedItemContext),\n      clicked_item = _React$useContext.clicked_item,\n      setClickedItem = _React$useContext.setState;\n\n  useEffect(function () {\n    if (newAddress !== \"\") {\n      fetch(\"https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyAJOTmiaxGzBHyK-MI9o3jRSwnHq0u-MvU&address=\".concat(newAddress), {\n        method: \"GET\",\n        dataType: \"JSON\"\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        setCenter({\n          lat: data.results[0].geometry.location.lat,\n          lng: data.results[0].geometry.location.lng\n        });\n        setZoom(14);\n      });\n    } else if (markerClick !== \"\") {\n      console.log(\"called\", markerClick);\n      setCenter({\n        lat: markerClick.lat,\n        lng: markerClick.lng\n      });\n      setNewAddress(markerClick.site_info.address);\n      setZoom(14);\n      var clicked_items = currentPointClicked;\n      clicked_items.push(markerClick);\n      addCurrentPointClicked(clicked_items);\n      console.log(\"set clicked item\", clicked_item);\n      setClickedItem(markerClick);\n      console.log(currentPointClicked);\n      setMarkerClick(\"\");\n    }\n  });\n  return __jsx(\"div\", {\n    className: \"google-map-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, __jsx(\"input\", {\n    id: \"address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 8\n    }\n  }), __jsx(\"button\", {\n    onClick: function onClick() {\n      return setNewAddress(document.getElementById('address').value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 8\n    }\n  }, \"Change Center\"), __jsx(GoogleMapReact, {\n    bootstrapURLKeys: {\n      key: \"AIzaSyAJOTmiaxGzBHyK-MI9o3jRSwnHq0u-MvU\"\n    } //bootstrapURLKeys={{ key: process.env.NEXT_PUBLIC_GOOGLE_MAPS_BOOTSTRAP_URL }}\n    ,\n    center: center // defaultZoom={13}\n    ,\n    zoom: zoom,\n    options: getMapOptions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, markers.map(function (item) {\n    return (//  <div onClick = {()=>setMarkerClick({lat: item.coordinates.lat,lng: item.coordinates.lng})}>\n      __jsx(MapMarker, {\n        key: item.key //text={item.name}            \n        ,\n        lat: item.coordinates.lat,\n        lng: item.coordinates.lng,\n        output_key: item.output_key,\n        name: item.name // coordinates = {item.coordinates}      \n        ,\n        site_info: item.site_info,\n        function_to_run: function function_to_run() {\n          return setMarkerClick({\n            name: item.name,\n            site_info: item.site_info,\n            lat: item.coordinates.lat,\n            lng: item.coordinates.lng\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }\n      })\n    );\n  })));\n}\n\n_s(GoogleMap, \"TpfOzx98wM6cn5ouXu+UHrP/AAY=\");\n\n_c = GoogleMap;\n\nvar _c;\n\n$RefreshReg$(_c, \"GoogleMap\");","map":{"version":3,"sources":["/Users/benjamingordon/Documents/X&X/townie/components/GoogleMap/index.jsx"],"names":["React","useContext","useState","useEffect","GoogleMapReact","useSwr","useRouter","Link","MapMarker","MapMarkersContext","ClickedItemContext","config","fetcher","fetch","then","res","json","getMapOptions","GoogleMap","markers","newAddress","setNewAddress","markerClick","setMarkerClick","currentPointClicked","addCurrentPointClicked","lat","lng","center","setCenter","zoom","setZoom","clicked_item","setClickedItem","setState","method","dataType","response","data","results","geometry","location","console","log","site_info","address","clicked_items","push","document","getElementById","value","key","map","item","coordinates","output_key","name"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport useSwr from 'swr';\r\nimport { useRouter } from 'next/router'\r\nimport Link from 'next/link'\r\n\r\nimport { MapMarker } from 'components/MapMarker';\r\nimport { MapMarkersContext } from 'components/MapMarkersContext';\r\nimport { ClickedItemContext } from 'components/ClickedItemContext';\r\n\r\nimport config from './mapConfig';\r\n\r\nconst fetcher = (...args) => fetch(...args).then(res => res.json());\r\n\r\nfunction getMapOptions() {\r\n  return config;\r\n}\r\n\r\nexport function GoogleMap() {  \r\n  const { markers } = useContext(MapMarkersContext);    \r\n  const [newAddress, setNewAddress] = useState(\"\");\r\n  const [markerClick, setMarkerClick] = useState(\"\");\r\n  const [currentPointClicked, addCurrentPointClicked] = useState([]);\r\n  const [center, setCenter] = useState({lat: 40.635,lng: -73.94});\r\n  const [zoom, setZoom] = useState(13);\r\n  const { clicked_item ,setState: setClickedItem } = React.useContext(ClickedItemContext);\r\n\r\n  useEffect(() => {        \r\n    if(newAddress !== \"\"){\r\n    fetch(`https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyAJOTmiaxGzBHyK-MI9o3jRSwnHq0u-MvU&address=${newAddress}`,{\r\n          method: \"GET\",\r\n          dataType: \"JSON\",\r\n      })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setCenter({lat: data.results[0].geometry.location.lat, lng: data.results[0].geometry.location.lng}); \r\n        setZoom(14);\r\n        \r\n      });\r\n    }\r\n    else if(markerClick !== \"\"){\r\n      console.log(\"called\", markerClick)\r\n      setCenter({lat:  markerClick.lat, lng: markerClick.lng}); \r\n      setNewAddress(markerClick.site_info.address);\r\n      setZoom(14);\r\n      var clicked_items = currentPointClicked;\r\n      clicked_items.push(markerClick);\r\n      addCurrentPointClicked(clicked_items);\r\n      console.log(\"set clicked item\",clicked_item)\r\n      setClickedItem(markerClick);\r\n      console.log(currentPointClicked);\r\n      setMarkerClick(\"\");\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div className=\"google-map-container\">            \r\n      {<input id=\"address\"></input>}\r\n      {<button onClick={() => setNewAddress(document.getElementById('address').value)}>Change Center</button>}      \r\n      <GoogleMapReact\r\n        bootstrapURLKeys={{ key: \"AIzaSyAJOTmiaxGzBHyK-MI9o3jRSwnHq0u-MvU\" }}\r\n        //bootstrapURLKeys={{ key: process.env.NEXT_PUBLIC_GOOGLE_MAPS_BOOTSTRAP_URL }}\r\n        center={center}\r\n        // defaultZoom={13}\r\n        zoom={zoom}\r\n        options={getMapOptions}\r\n      >\r\n       {markers.map((item) => (\r\n        //  <div onClick = {()=>setMarkerClick({lat: item.coordinates.lat,lng: item.coordinates.lng})}>\r\n          <MapMarker\r\n            key={item.key}\r\n            //text={item.name}            \r\n            lat={ item.coordinates.lat}\r\n            lng={ item.coordinates.lng}\r\n            output_key = {item.output_key}            \r\n            name = {item.name}\r\n            // coordinates = {item.coordinates}      \r\n            site_info= {item.site_info}\r\n            function_to_run = {()=>setMarkerClick({name: item.name, site_info: item.site_info, lat: item.coordinates.lat,lng: item.coordinates.lng})}\r\n          />                    \r\n        ))}\r\n      </GoogleMapReact>      \r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}