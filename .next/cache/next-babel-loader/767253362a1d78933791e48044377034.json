{"ast":null,"code":"var _jsxFileName = \"/Users/benjamingordon/Documents/X&X/townie/components/GoogleMap/index.jsx\";\nvar __jsx = React.createElement;\nimport React, { useContext, useState, useEffect } from 'react';\nimport GoogleMapReact from 'google-map-react';\nimport useSwr from 'swr';\nimport { MapMarker } from 'components/MapMarker';\nimport { MapMarkersContext } from 'components/MapMarkersContext';\nimport config from './mapConfig';\n\nconst fetcher = (...args) => fetch(...args).then(res => res.json());\n\nfunction getMapOptions() {\n  return config;\n}\n\nfunction getCenter() {\n  if (coordinates === undefined) {\n    var address = \"554 76th street bay ridge\";\n    const {\n      coordinates,\n      error\n    } = useSwr(`https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=${address}`, fetcher);\n\n    if (error) {\n      console.error('Error loading the Google Maps lng lat ', error);\n    }\n\n    return {\n      lat: coordinates.results[0].geometry.location.lat,\n      lng: coordinates.results[0].geometry.location.lng\n    };\n  } else return {\n    lat: 40.635,\n    lng: -73.94\n  };\n}\n\nfunction changeCenter() {\n  var coordinates = {\n    lat: 40.742,\n    lng: -73.769\n  };\n  return coordinates;\n} // var address = \"\";\n// function setCoordinates(address){    \n// if(address !== \"\"){             \n//     //fetch(`https://maps.googleapis.com/maps/api/geocode/json?key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_BOOTSTRAP_URL}&address=${this.state.address}`,{\n//     fetch(`https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=${this.state.address}`,{\n//         method: \"GET\",\n//         dataType: \"JSON\",\n//         // headers: {\n//         //   \"Content-Type\": \"application/json; charset=utf-8\",\n//         // }\n//     })\n//     .then(response => response.json())\n//     .then(data => {           \n//       this.setState({ coordinates: {lat: data.results[0].geometry.location.lat, lng: data.results[0].geometry.location.lng}});          \n//     });\n// }\n// }\n\n\nexport function GoogleMap() {\n  const {\n    markers\n  } = useContext(MapMarkersContext);\n  const [address, setState] = React.useState(\"554 76th street bay ridge\");\n  const {\n    coordinates,\n    error\n  } = useSwr(`https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=${address}`, fetcher);\n\n  if (error) {\n    console.error('Error loading the Google Maps lng lat ', error);\n  }\n\n  useEffect(() => {\n    coordinates = {\n      lat: coordinates.results[0].geometry.location.lat,\n      lng: coordinates.results[0].geometry.location.lng\n    };\n    return () => {\n      setMapMarkers([]);\n    };\n  }, [coordinates, setMapMarkers]);\n  return __jsx(\"div\", {\n    className: \"google-map-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, __jsx(\"button\", {\n    name: \"address\",\n    value: \"change\",\n    onChange: changeCenter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), __jsx(GoogleMapReact, {\n    bootstrapURLKeys: {\n      key: \"AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo\"\n    } //bootstrapURLKeys={{ key: process.env.NEXT_PUBLIC_GOOGLE_MAPS_BOOTSTRAP_URL }}\n    ,\n    center: getCenter(coordinates),\n    defaultZoom: 13,\n    options: getMapOptions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, markers.map(item => __jsx(MapMarker, {\n    key: item.key //text={item.name}            \n    ,\n    lat: item.coordinates.lat,\n    lng: item.coordinates.lng,\n    site_info: item.site_info,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["/Users/benjamingordon/Documents/X&X/townie/components/GoogleMap/index.jsx"],"names":["React","useContext","useState","useEffect","GoogleMapReact","useSwr","MapMarker","MapMarkersContext","config","fetcher","args","fetch","then","res","json","getMapOptions","getCenter","coordinates","undefined","address","error","console","lat","results","geometry","location","lng","changeCenter","GoogleMap","markers","setState","setMapMarkers","key","map","item","site_info"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,MAAP,MAAmB,KAAnB;AAEA,SAASC,SAAT,QAA0B,sBAA1B;AACA,SAASC,iBAAT,QAAkC,8BAAlC;AAEA,OAAOC,MAAP,MAAmB,aAAnB;;AAEA,MAAMC,OAAO,GAAG,CAAC,GAAGC,IAAJ,KAAaC,KAAK,CAAC,GAAGD,IAAJ,CAAL,CAAeE,IAAf,CAAoBC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAA3B,CAA7B;;AAEA,SAASC,aAAT,GAAyB;AACvB,SAAOP,MAAP;AACD;;AAED,SAASQ,SAAT,GAAqB;AACnB,MAAGC,WAAW,KAAKC,SAAnB,EAA6B;AAC3B,QAAIC,OAAO,GAAG,2BAAd;AACA,UAAM;AAAEF,MAAAA,WAAF;AAAeG,MAAAA;AAAf,QAAyBf,MAAM,CAAE,yGAAwGc,OAAQ,EAAlH,EAAqHV,OAArH,CAArC;;AACA,QAAIW,KAAJ,EAAW;AACTC,MAAAA,OAAO,CAACD,KAAR,CAAc,wCAAd,EAAwDA,KAAxD;AACD;;AACD,WAAO;AAACE,MAAAA,GAAG,EAAEL,WAAW,CAACM,OAAZ,CAAoB,CAApB,EAAuBC,QAAvB,CAAgCC,QAAhC,CAAyCH,GAA/C;AAAoDI,MAAAA,GAAG,EAAET,WAAW,CAACM,OAAZ,CAAoB,CAApB,EAAuBC,QAAvB,CAAgCC,QAAhC,CAAyCC;AAAlG,KAAP;AACD,GAPD,MAQE,OAAO;AAACJ,IAAAA,GAAG,EAAE,MAAN;AAAaI,IAAAA,GAAG,EAAE,CAAC;AAAnB,GAAP;AACH;;AAED,SAASC,YAAT,GAAwB;AACtB,MAAIV,WAAW,GAAG;AAACK,IAAAA,GAAG,EAAE,MAAN;AAAaI,IAAAA,GAAG,EAAE,CAAC;AAAnB,GAAlB;AACA,SAAOT,WAAP;AACD,C,CAED;AAEA;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACF;;;AAEA,OAAO,SAASW,SAAT,GAAqB;AAC1B,QAAM;AAAEC,IAAAA;AAAF,MAAc5B,UAAU,CAACM,iBAAD,CAA9B;AACA,QAAM,CAACY,OAAD,EAAUW,QAAV,IAAsB9B,KAAK,CAACE,QAAN,CAAe,2BAAf,CAA5B;AACA,QAAM;AAAEe,IAAAA,WAAF;AAAeG,IAAAA;AAAf,MAAyBf,MAAM,CAAE,yGAAwGc,OAAQ,EAAlH,EAAqHV,OAArH,CAArC;;AACA,MAAIW,KAAJ,EAAW;AACTC,IAAAA,OAAO,CAACD,KAAR,CAAc,wCAAd,EAAwDA,KAAxD;AACD;;AAEDjB,EAAAA,SAAS,CAAC,MAAM;AACdc,IAAAA,WAAW,GAAG;AAACK,MAAAA,GAAG,EAAEL,WAAW,CAACM,OAAZ,CAAoB,CAApB,EAAuBC,QAAvB,CAAgCC,QAAhC,CAAyCH,GAA/C;AAAoDI,MAAAA,GAAG,EAAET,WAAW,CAACM,OAAZ,CAAoB,CAApB,EAAuBC,QAAvB,CAAgCC,QAAhC,CAAyCC;AAAlG,KAAd;AACA,WAAO,MAAM;AACXK,MAAAA,aAAa,CAAC,EAAD,CAAb;AACD,KAFD;AAGD,GALQ,EAKN,CAACd,WAAD,EAAcc,aAAd,CALM,CAAT;AAOA,SACE;AAAK,IAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAQ,IAAA,IAAI,EAAE,SAAd;AAAwB,IAAA,KAAK,EAAG,QAAhC;AAAyC,IAAA,QAAQ,EAAEJ,YAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,MAAC,cAAD;AACE,IAAA,gBAAgB,EAAE;AAAEK,MAAAA,GAAG,EAAE;AAAP,KADpB,CAEE;AAFF;AAGE,IAAA,MAAM,EAAEhB,SAAS,CAACC,WAAD,CAHnB;AAIE,IAAA,WAAW,EAAE,EAJf;AAKE,IAAA,OAAO,EAAEF,aALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOEc,OAAO,CAACI,GAAR,CAAaC,IAAD,IACV,MAAC,SAAD;AACE,IAAA,GAAG,EAAEA,IAAI,CAACF,GADZ,CAEE;AAFF;AAGE,IAAA,GAAG,EAAGE,IAAI,CAACjB,WAAL,CAAiBK,GAHzB;AAIE,IAAA,GAAG,EAAGY,IAAI,CAACjB,WAAL,CAAiBS,GAJzB;AAKE,IAAA,SAAS,EAAGQ,IAAI,CAACC,SALnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAPF,CAFF,CADF;AAsBD","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport useSwr from 'swr';\r\n\r\nimport { MapMarker } from 'components/MapMarker';\r\nimport { MapMarkersContext } from 'components/MapMarkersContext';\r\n\r\nimport config from './mapConfig';\r\n\r\nconst fetcher = (...args) => fetch(...args).then(res => res.json())\r\n\r\nfunction getMapOptions() {\r\n  return config;\r\n}\r\n\r\nfunction getCenter() {\r\n  if(coordinates === undefined){\r\n    var address = \"554 76th street bay ridge\";\r\n    const { coordinates, error } = useSwr(`https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=${address}`, fetcher);\r\n    if (error) {\r\n      console.error('Error loading the Google Maps lng lat ', error);\r\n    }\r\n    return {lat: coordinates.results[0].geometry.location.lat, lng: coordinates.results[0].geometry.location.lng};    \r\n  }else\r\n    return {lat: 40.635,lng: -73.94};\r\n}\r\n\r\nfunction changeCenter() {  \r\n  var coordinates = {lat: 40.742,lng: -73.769};\r\n  return coordinates;  \r\n}\r\n\r\n// var address = \"\";\r\n\r\n// function setCoordinates(address){    \r\n  // if(address !== \"\"){             \r\n  //     //fetch(`https://maps.googleapis.com/maps/api/geocode/json?key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_BOOTSTRAP_URL}&address=${this.state.address}`,{\r\n  //     fetch(`https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=${this.state.address}`,{\r\n  //         method: \"GET\",\r\n  //         dataType: \"JSON\",\r\n  //         // headers: {\r\n  //         //   \"Content-Type\": \"application/json; charset=utf-8\",\r\n  //         // }\r\n  //     })\r\n  //     .then(response => response.json())\r\n  //     .then(data => {           \r\n  //       this.setState({ coordinates: {lat: data.results[0].geometry.location.lat, lng: data.results[0].geometry.location.lng}});          \r\n  //     });\r\n  // }\r\n// }\r\n\r\nexport function GoogleMap() {  \r\n  const { markers } = useContext(MapMarkersContext);\r\n  const [address, setState] = React.useState(\"554 76th street bay ridge\"); \r\n  const { coordinates, error } = useSwr(`https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo&address=${address}`, fetcher);\r\n  if (error) {\r\n    console.error('Error loading the Google Maps lng lat ', error);\r\n  }  \r\n\r\n  useEffect(() => {\r\n    coordinates = {lat: coordinates.results[0].geometry.location.lat, lng: coordinates.results[0].geometry.location.lng};\r\n    return () => {\r\n      setMapMarkers([]);\r\n    }\r\n  }, [coordinates, setMapMarkers]);\r\n\r\n  return (\r\n    <div className=\"google-map-container\">      \r\n      <button name =\"address\" value = \"change\" onChange={changeCenter}></button>\r\n      <GoogleMapReact\r\n        bootstrapURLKeys={{ key: \"AIzaSyBe7_ta_1zNod6CsCJI6ssWk64kyO14HZo\" }}\r\n        //bootstrapURLKeys={{ key: process.env.NEXT_PUBLIC_GOOGLE_MAPS_BOOTSTRAP_URL }}\r\n        center={getCenter(coordinates)}\r\n        defaultZoom={13}\r\n        options={getMapOptions}\r\n      >\r\n       {markers.map((item) => (\r\n          <MapMarker\r\n            key={item.key}\r\n            //text={item.name}            \r\n            lat={ item.coordinates.lat}\r\n            lng={ item.coordinates.lng}\r\n            site_info= {item.site_info}             \r\n          />\r\n        ))}\r\n      </GoogleMapReact>      \r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}